## Структура папок и краткое описание

**cmd -> gophermart -> main.go**
В main.go инициализация/запуск сервера и клиента. Клиент запускается в виде горутины. Он параллельно занимается опросом базы данных на наличие необработанных заказов со статусом NEW, собирает их и в отдельных воркерах делает по ним запросы в систему расчета баллов. На основе полученной информации обновляет записи в базе данных. 
   
**internal -> app -> client -> client.go**
Реализация клиента  и воркеров. 
Метод Run() создает тикер, который с периодичностью в 3 сек дает тик в канал, где запускается проверка на необработанные заказы со статусами NEW, PROCESSING, REGISTERED. Так же запускает пул воркеров, которые забирают из буферизированного канала работу (необработанные заказы) и делают по ним запросы в систему расчета баллов с обновлением базы данных полученной информацией.

**internal -> app -> server -> config.go
												|
												server.go**
Пакет server содержит реализацию метода инициализации конфигурации сервера. 

**internal -> customerr -> customerror.go**
Кастомные ошибки.

**internal -> db**
Слой работы с хранилищем.

**internal -> db -> store.go**
Содержит общий интерфейс хранилища. 
CreateTables() - создание таблиц при инициализации описанных в файлах миграций.
Close() - метод закрытия соединений с БД при Shutdown сервера.
User() - возвращает интерфейс работы с сущностью **пользователь**.
Order() - возвращает интерфейс работы с сущностью **заказ**.

**internal -> db -> repository.go**
Содержит интерфейсы сущностей. 
Отдельно методы для работы с пользователем.
Отдельно для работы с заказами.

**internal -> db -> models**
Содержит модели для работы с хранилищем.
Отдельно для пользователя.
Отдельно для заказов.

**internal -> db -> postgres**
Содержит реализацию интерфейсов Store, UniversalUserRepository и UniversalOrderRepository конкретно применительно к базе данных Postgresql.

**internal -> tools**
Содержит вспомогательные инструменты, используемые в различных частях программы.
**convert** - реализация методов для конвертации различных сущностей:
				- конвертация баллов из float64 в int64 и наоборот (так как в базе данных баллы хранятся в int64, дабы не заморачиваться с типом numeric in postgresql и только при передаче во вне конвертируются во float64).
				- конвертация времени сохранения заказа в RFC3339.
				- конвертация UUID в string (uuid генерируется автоматически средствами самой базы данных при регистрации нового пользователя).
**jwttoken** - методы работы с токеном jwt (используется пакет github.com/golang-jwt/jwt/v4).
**luhn** - методы работы с алгоритмом Луна. Валидация входящих заказов.

**internal -> transport**
Транспортный слой.

**internal -> transport -> handlers**
Реализация обработчиков всех эндпоинтов.
**checkcookies.go** - middleware проверки cookie.
**gethandlers.go** - реализация всех обработчиков GET - запросов.
**posthandlers.go** - реализация всех обработчиков POST - запросов.
**handlers.go** - структура handler и его конструктор.

**internal -> transport -> router**
Конструктор chi роутеров.

**migrations -> postgres**
Миграции.

